## 期望的尾概率求和
$$
E(X) = \sum_{i=1}^\infty {P(X~\geq~i)}
$$

具体证明涉及到高等概率论的知识, 暂时不做讲解。
我们如何利用这个公式完成一些问题的转化呢？

这里利用 **暑假杭电多校第6场** 的一题做讲解：

**G. 树上 $MEX$ 问题**
给定一棵 个点的树，每个点有点权，点权是 到 的排列，求所有连通块（连通导出子图）的 $MEX$ 之和。
数据范围：$1 \leq n \leq 10^5$

显然不同的连通块的 $MEX$ 不同，我们令 $c_i$ 为 $MEX$ 的值为 $i$ 的连通块数量，则我们要求的就是:
$$
c_1 + 2c_2 + 3c_3 + ... = \sum_{i=1}^n i\cdot c_i
$$

利用上面的公式可以理解, 所有连通块的 $MEX$ 总和即为 $i=1,2,3,...$ 时, $MEX \geq i$ 的连通块数量之和。

同理观察上面的式子：
$$
\sum_{i=1}^\infty i\cdot c_i = c_1 + 2c_2 + 3c_3 + ...\\
= (c_1+c_2+c_3+...) + (c_2+c_3+...) + (c_3+...) + ...\\
\;\\
= \sum_{i=1}^\infty c_{~(x~\geq~i)}
$$
